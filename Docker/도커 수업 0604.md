root@server:~/docker/echo# cd ..
root@server:~/docker# ls
Dockerfile echo main2.go main.go
root@server:~/docker# cp main.go ./echo/main.go
root@server:~/docker# cd main.go
bash: cd: main.go: Not a directory
root@server:~/docker# cd echo
root@server:~/docker/echo# ls
main.go
root@server:~/docker/echo# docker container run -d -p 9091:8080 -v /root/docker/echo:/echo echo
39740f905051981bd500a3d10186f02cbc9f0e13aee36306c04c12474b494b2e
root@server:~/docker/echo# curl http://localhost:9091
Hello Docker !!!root@server:~/docker/echo#
root@server:~/docker/echo# vim main.go
root@server:~/docker/echo# docker container restart 397
397
root@server:~/docker/echo# curl http://localhost:9091
Hello Docker ^**\_**^root@server:~/docker/echo#

root@server:~# cd docker
root@server:~/docker# ls
Dockerfile echo main2.go main.go
root@server:~/docker# cd echo
root@server:~/docker/echo# docker ps
CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES
root@server:~/docker/echo# docker container ps -a
CONTAINER ID IMAGE COMMAND CREATED STATUS PORTS NAMES
39740f905051 echo "go run /echo/main.go" 3 days ago Exited (255) About a minute ago 0.0.0.0:9091->8080/tcp dreamy_spence
3ca2e23cf1aa echo "go run /echo/main.go" 3 days ago Exited (1) 3 days ago priceless_jackson
17ae121036bb echo "go run /echo/main.go" 3 days ago Exited (1) 3 days ago jolly_fermi
c108991cd50e echo "go run /echo/main.go" 3 days ago Exited (1) 3 days ago confident_curran
a22aed63a7f2 echo "go run /echo/main.go" 3 days ago Exited (255) About a minute ago 0.0.0.0:9090->8080/tcp stupefied_poitras
root@server:~/docker/echo# docker container start 397
397
root@server:~/docker/echo# curl http://localhost:9091
Hello Docker ^**\_**^root@server:~/docker/echo# docker commit 397 ganzik/k_echo
sha256:bf86926aac9471c2b393c7228a2f7bff8e25cac84fe53067ded13f6971b275a3
root@server:~/docker/echo# docker image ls
REPOSITORY TAG IMAGE ID CREATED SIZE
ganzik/k_echo latest bf86926aac94 5 seconds ago 762MB
echo latest f2a23a52012a 3 days ago 750MB
golang 1.9 ef89ef5c42a9 10 months ago 750MB
root@server:~/docker/echo# ^C
root@server:~/docker/echo# docker login
Login with your Docker ID to push and pull images from Docker Hub. If you don't have a Docker ID, head over to https://hub.docker.com to create one.
Username: ganzik
Password:
Login Succeeded
root@server:~/docker/echo# docker push ganzik/k_echo
The push refers to a repository [docker.io/ganzik/k_echo]
853d5b97052f: Pushed
efe5605f4222: Pushed
e14e9acf9d99: Pushed
186d94bd2c62: Mounted from library/golang
24a9d20e5bee: Mounted from library/golang
e7dc337030ba: Mounted from library/golang
920961b94eb3: Mounted from library/golang
fa0c3f992cbd: Mounted from library/golang
ce6466f43b11: Mounted from library/golang
719d45669b35: Mounted from library/golang
3b10514a95be: Mounted from library/golang
latest: digest: sha256:8ffc31d9022df65f45e99f15f05e3c4e2805799715bd3566b662ffbd1b1509f4 size: 2628
root@server:~/docker/echo#

도커 컨테이너를 이미지로 만들때는 commit 옵션을 사용한다
docker commit 397(컨테이너 아이디) ganzik/k_echo

도커에 로그인
docker login

도커 이미지를 도커허브에 올린다
docker push ganzik/k_echo

build
Dockerfile 을 참조해서 만든 이미지를 믿을 수 있다

commit
어떻게 만들었는지 알 수 없다

```bash
# 호스트 포트를 지정하지 않으면 순차적으로 자동으로 작성된다
docker container run -d -p :8080 echo
```

문제)

1. runc.sh 스크립트를 작성

2. 파라미터로 컨테이너 이름을 받습니다.

3. 동일한 이름의 컨테이너가 존재하면 해당 컨테이너를 삭제 후 컨테이너를 생성(실행)한다.

4. 생성 스크립트는 다음과 같다.
   - docker container run --name 컨테이너이름 -itd -p 8888:8080 echo

5) runc.sh hello 명령을 입력하면 컨테이너가 실행된다.

```bash
#!/bin/bash

function msg () {
	printf "%s" $1
	for i in {1..5}
	do
		printf "%s" "."
		sleep 1
	done
}

# 명령어 형식을 체크 (파라미터 존재 여부를 확인)
if [ $# == 0 ]
then
	echo 명령어 사용법이 잘못되었습니다.
	echo [사용법] ./run.sh container_name
	exit 1
fi

# 컨테이너 실행 전 컨테이너 리스트를 출력
echo "----------------------------"
echo "실행전 docker container ps -a "
echo "----------------------------"
msg "실행전 컨테이너 목록을 조회합니다."
docker container ps -a

# 동일 이름의 컨테이너를 조회
cid=$(docker container ps --filter="name=^/$1$" -q)

# 동일 이름의 컨테이너가 존재하는 경우 해당 컨테이너를 삭제하고 메시지를 출력
if [ "$cid" != "" ]
then
	docker container rm -f $cid
	echo $1 이름의 컨테이너\($cid\)를 삭제했습니다.
fi

# 컨테이너를 실행. 만약 포트 중복을 피하려면 호스트 포트번호를 지워준다
docker container run --name $1 -itd -p 8888:8080 echo

# 컨테이너 실행후 컨테이너 리스트를 출력
echo "----------------------------"
echo "실행후 docker container ps -a "
echo "----------------------------"
msg "실행후 컨테이너 목록을 조회합니다."
docker container ps -a

# 쉘 종료
exit 0

```

```bash
# 포트 기준으로 뽑아내기

docker container ls -a | grep :8888

set $(docker container ls -a | grep :8888)
echo $1
```
