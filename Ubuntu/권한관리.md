# 리눅스 권한 관리

## 디렉토리 구조

![리눅스 디렉토리 구조](./imgs/dir.png)

> | 위치         | 이름            | 설명                                                                                                                                            |
> | ------------ | --------------- | ----------------------------------------------------------------------------------------------------------------------------------------------- |
> | /            | 루트            | 최상위(루트) 디렉토리                                                                                                                           |
> |              |                 | 디렉토리들의 절대 경로를 표기할 때 이 디렉토리로 부터 시 작함                                                                                   |
> | /bin         | 바이너리        | 이진파일(실행파일)                                                                                                                              |
> |              |                 | 기본적인 명령어가 저장된 디렉토리                                                                                                               |
> |              |                 | 리눅스에서 자주 사용하는 mv, cp, rm등과 같은 명령어들이 이 디렉토리에 존재함                                                                    |
> | /etc         |                 | 서비스와 애플리케이션이 사용하는 시스템 차원의 환경 설정 파일                                                                                   |
> |              |                 | 예를 들어, 엔진엑스 서버 설정이나 가상 호스트 편집 등                                                                                           |
> | /home        | 홈              | 사용자들의 홈디렉토리가 있는 곳                                                                                                                 |
> |              |                 | 사용자를 추가하면 사용자의 id와 동일한 디렉토리가 이곳에 자동으로 생성                                                                          |
> | /lib         | 라이브러리      | 커널이 필요로 하는 각종 라이브러리 파일 커널 모듈파일 등 이 존재하는 디렉토리                                                                   |
> |              |                 | /bin과 /sbin에 있는 바이너리를 실행할 때 필요                                                                                                   |
> | /opt         | 옵트            | 응용프로그램 패키지 설치 장소                                                                                                                   |
> |              |                 | 패키지 매니저가 자체적으로 설치/삭제를 수행함                                                                                                   |
> | /root        | 루트            | 관리자계정 root 사용자의 홈디렉토리                                                                                                             |
> | /sbin        | 시스템 바이너리 | 시스템 이진파일(실행파일)                                                                                                                       |
> |              |                 | ifconfig, ethtool, halt, e2fsck와 같은 시스템 명령어들을 저장하 고 있는 디렉토리                                                                |
> | /usr         | 유저            | 일반 사용자들이 사용하는 디렉토리                                                                                                               |
> | /usr/bin     |                 | 모든 사용자가 공유하는 필수적이지 않은 명령 바이너리와 스크립트 (wget, gzip 등)                                                                 |
> | /usr/include |                 | 컴파일 시 포함되는 C 라이브러리에서 넘어온 헤더 파일                                                                                            |
> |  /usr/lib    |                 | /usr/bin 과 /usr/sbin 에서 사용하는 라이브러리                                                                                                  |
> | /usr/sbin    |                 | 모든 사용자가 공유하는 필수적이지 않은 시스템 명령 바이너리와 스크립트(useradd, ntpdate 등)                                                     |
> | /usr/local   |                 | 지역 데이터 전용으로 사용되는 세 번째 계층                                                                                                      |
> | /var         |                 | 시스템 운용중 생성되었다가 삭제되는 데이터를 임시 저장하 기 위한 공간으로 사용되는 디렉토리                                                     |
> | /var/lib     |                 | 애플리케이션이나 운영체제와 관련된 변수 상태 정보                                                                                               |
> |              |                 |  MySQL 데이터베이스 파일은 보통 `/var/lib/mysql`에 저장된다                                                                                     |
> | /var/lock    |                 | 애플리케이션의 자원 접근 동기화에 사용되는 잠금 파일                                                                                            |
> | /var/log     |                 | 프로그램, 서비스, 시스템 커널에서 생성되는 로그 파일                                                                                            |
> | /var/run     |                 | 실시간 변수 데이터. 시스템 재부팅 시 완전히 삭제되고, 가동이 시작될 때 상태에 관한 모든 정보를 제공한다. (pid 같은 걸 여기에 저장하는 모양이다) |
> | /var/spool   |                 | 이메일, 프린트 작업과 같이 처리를 기다리는 파일을 저장하는 디렉토리                                                                             |
> | /var/tmp     |                 | 시스템을 재부팅하더라도 삭제돼서는 안되는 임시 파일을 위한 저장소                                                                               |

## 파일 및 디렉토리 권한 확인

```bash
ls -al
```

![파일 및 디렉토리 권한](./imgs/dir_2.png)

❶ 파일의 종류와 권한

❷ 파일의 소유자

❸ 파일에 대한 그룹

![파일 및 디렉토리 권한](./imgs/dir_3.png)

ⓐ 파일 및 디렉터리 종류. - 는 일반 파일, d는 디렉터리, l은 링크(link)

ⓑ 파일 및 디렉터리 소유자의 권한

ⓒ 파일 및 디렉터리 그룹의 권한

ⓓ 해당 파일 및 디렉터리의 소유자도 그룹도 아닌 제3의 사용자에 대한 권한

> ## 사용자를 세가지 유형으로 분류
>
> - 해당 파일 또는 디렉토리의 소유자
> - 해당 파일 또는 디렉토리의 소유 그룹
> - 소유자도 그룹도 아닌 사용자

> ## 파일 / 디렉토리에 대한 권한을 세 가지로 분류
>
> - 읽기 권한 : Read , r
> - 쓰기 권한 : Write, w
> - 실행 권한 : Execute, x
> - 권한은 숫자로 표기 가능. 읽기는 4, 쓰기는 2, 실행은 1로 나타낸 뒤 각 권한 세트별로 합치는 방식
>
> - 예) 777 : 소유자, 그룹, 다른 사용자 모두 읽기 쓰기 실행 가능
> - 예) 700 : 소유자만 읽기, 쓰기, 실행 가능

## 기본 파일 생성 권한 지정 (umask)

```bash
# umask 확인
umask

# a.txt 파일 생성
touch a.txt

# 파일 권한을 027로 기본 생성
umask 027

# b.txt 파일 생성
touch b.txt

# 파일 권한을 022로 기본 설정
umask 022

# ls -al 생성된 a.txt, b.txt파일 권한을 비교
ls -al
```

## 파일 및 디렉토리 권한 변경 (chmod)

chmod 명령의 옵션 숫자는  
r : 4  
w : 2  
x : 1  
이것의 합과 같다

예를 들어 `chmod 744 파일이름`을 bash에 입력하면  
7 : 소유자 권한 4 + 2 + 1 -> rwx  
4 : 그룹권한 4  -> --r  
4 : 아무사용자나의 권한 4 -> --r

```bash
# a.txt 파일에 그룹(group) 쓰기(w)권한 허가
chmod g+w a.txt

# a.txt 파일에 o(Others) 실행(x)권한 거부
chmod o-x a.txt

# 파일 및 디렉토리 권한 숫자를 이용하여 변경
chmod 777 a.txt
```

## 파일 및 디렉토리 소유권 변경 (chown)

> chown - 파일 및 디렉토리의 소유주와 그룹을 변경해준다  
> -R 옵션을 주면 하위 디렉토리, 파일까지 모두 변경된다

```bash
# dir 소유권을 유저이름 ganzik 그룹이름 blochaid로 변경
chown ganzik:blochaid dir

# dir 소유권을 하위디렉토리까지 모두 유저이름 ganzik 그룹이름 blochaid로 변경
chown -R ganzik:blochaid dir
```

---

## 커널 버전 확인

```bash
uname -a
```

## 디스크 용량 확인

```bash
df -h
```

## CPU 정보 확인

```bach
cat /proc/cpuinfo
```

## 메모리 정보 확인

```bash
cat /proc/meminfo
```
