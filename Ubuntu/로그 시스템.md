# 리눅스 로그 시스템

## 로그 종류

- UTMP : 가장 기본적인 로그
- WTMP : 로그인, 로그아웃, 시스템 재부팅 등에 대한 로그
- Secure : 보안 관련 로그
- Syslog : 시스템 운영 전반 로그

## ubuntu 로그 위치

- /var/log/wtmp
- /var/log/btmp
- /var/log/auth.log
- /var/log/syslog
- /var/log/message
- /var/run/log/utmp

## UTMP

- 현재 로그인한 사용자의 상태정보를 담고 있는 로그파일
- 가장 기본적인 로그, utmp 데몬(/etc/lib/utmpd)이 로그 기록
- 로그인 계정 이름, 로그인 환경, 로그인 디바이스(console, tty 등)
- 로그인 셸의 프로세스 ID, 로그인 계정의 형식
- 로그오프 여부, 로그인 시간
- 저장 위치 : /var/run/utmp
- 관련 명령 : w, who, users

## 현재 시스템에 로그인한 사용자 이름 출력

```bash
w
```

![w](./imgs/w.png)

- USER : 로그인 계정
- TTY : 터미널 장치 명
- FROM : 원격 호스트 주소
- LOGIN@ : 로그인한 시간
- IDLE : 아무 입력도 수행하지 않은 IDLE 시간 \* WHAT : 현재 수행하는 작업 (명령어
- 서버의 현재 시각
- 서버 부팅 이후 시스템 작동시간
- 접속자별 서버 평균 부하율

## 현재 시스템에 접속한 사용자 확인

```bash
who

# 모든 정보 표시
who -a

# 마지막 부팅 정보
who -b

# 마지막 런레벨 확인
who -r

# 접속한 사용자 이름만 확인
users
```

# WTMP

사용자의 성공한 로그인/로그아웃, 시스템 부팅/종료 등에 대한 이력

- Binary 형태로 저장되어 있음
- 저장 위치 : /var/log/wtmp

```bash
last
```
