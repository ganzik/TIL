# Linux Ubuntu 서버 운용을 위한 명령어

## 관리자 활성화 및 비밀번호 지정

```bash
# 리눅스 관리자 root 활성화
sudo su - root
[sudo] password for ubuntu: # 현재 사용자 계정 패스워드를 입력해서 루트권한에 진입

# root 패스워드 지정
passwd
# root 사용자의 비밀번호 생성 (password 2회 입력)
```

## 부팅을 위한 중요한 디렉토리 삭제

```bash
# rm = remove, -rf = 강제로 /boot 디렉토리를 삭제
rm -rf /boot
```

## 시스템 종료

```bash
halt -p
# or
poweroff
# or
init 0
# or shutdown 옵션
shutdown -P +10    # 10분 후에 종료 (P: poweroff)
shutdown -r 22:00    # 오후 10시에 재부팅 (r: reboot)
shutdown -c    # 예약된 shutdown을 취소(c: cancle)
shutdown -h 5    # 5분 뒤에 시스템 종료
shutdown -k +15    # 현재 접속한 사용자에게 15분 후에 종료된다는 메시지를 보내지만 실제로는 종료 안 됨
```

## 시스템 재부팅

```bash
reboot
# or
shutdown -r now
# or
init 6
```

## 로그아웃

```bash
logout
# or
exit
```

## 가상 콘솔

- 우분투 18.04 환경  
  x 윈도우는 ctl+alt+f1  
  그 뒤로 f2~f6 까지는 가상 콘솔

## 런레벨

init 명령어 뒤에 붙는 숫자를 런레벨(RunLevel)이라고 부른다

| 런레벨 | 영문 모드  | 설명                           | 비고             |
| ------ | ---------- | ------------------------------ | ---------------- |
| 0      | Power Off  | 종료 모드                      |
| 1      | Rescue     | 시스템 복구 모드               | 단일 사용자 모드 |
| 2      | Multi-User |                                | 사용하지 않음    |
| 3      | Multi-user | 텍스트 모드의 다중 사용자 모드 |
| 4      | Multi-User |                                | 사용하지 않음    |
| 5      | Graphical  | 그래픽 모드의 다중 사용자 모드 |
| 6      | Reboot     |                                |

> 런레벨 확인

```bash
cd /lib/systemd/system
ls -l runlevel?.target
```

![runlevel](./imgs/runlevel.png)

ubuntu desktop은 부팅과 동시에 자동으로 x 윈도우가 실행되므로, 런레벨 5번으로 지정된다

ubuntu server는 텍스트 모드로 시작되므로, 런레벨 3번으로 지정된다

현재 시스템에 설정된 런레벨은 링크 파일인 `/lib/systemd/system/default.target` 을 확인하면 알 수 있다

## 자동 완성과 히스토리

파일이나 디렉토리 일부분만 입력하고 `TAP` 키를 누르면 나머지가 자동으로 완성되는 기능

## 명령했던 기록 보기

```bash
# 지난 기록 전부 보기
history

# 기억된 기록 전부 삭제
history -c
```

## 도움말

명령어 옵션에 대한 도움말을 보기 위해서는 `man + 명령어`

```bash
# ex) ls(리스트) 명령어에 대한 도움말 보기
man ls
```

## 옵션의 상세 설명

> 명령어 --help

## 마운트

현재 마운트된 장치 확인

```bash
# 현재 마운트된 장치 확인
mount

# ex) cdrom 마운트 해제
unmount /dev/cdrom
```

## ISO 파일 생성

genisoimage 패키지 설치

```bash
dpkg --get-selections genisoimage
```

```bash
# ex) /boot 디렉토리 파일들을 boot.iso 파일로 생성
genisoimage -r -J -o boot.iso /boot

# '-r -J'는 8글자 이상의 파일 이름 및 대소문자를 구분하기 위한 옵션
# -o 는 출력할 파일을 위한 옵션
```
